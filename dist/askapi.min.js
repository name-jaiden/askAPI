/**
 * askApi v0.0.16
 * (c) 2019 Jaiden
 * @license MIT
 */
var t,e;t=this,e=function(){"use strict";var t,e,n={local:function(t,e,n){if("get"===t)return r(window.localStorage.getItem(e));"set"===t&&(null===n?window.localStorage.removeItem(e):window.localStorage.setItem(e,JSON.stringify(n)))},session:function(t,e,n){if("get"===t)return r(window.sessionStorage.getItem(e));"set"===t&&(null===n?window.sessionStorage.removeItem(e):window.sessionStorage.setItem(e,JSON.stringify(n)))},cookie:function(t,e,n){if("get"===t){if(!e)return"";var i="",o=e+"=",s=document.cookie.indexOf(o);if(s>-1){var a=document.cookie.indexOf(";",s);-1===a&&(a=document.cookie.length),i=document.cookie.substring(s+o.length,a)}return r(i)}if("set"===t){var u="",f=void 0===n&&null===n;u+=e+"="+JSON.stringify(f?"":n),document.cookie=u}}};function r(t){try{return null==t||""===t?void 0:JSON.parse(t)}catch(t){}}function i(t){return null!==t&&"object"==typeof t}function o(t,e){try{return t.split(".").reduce(function(t,e){return t[e]},e)}catch(t){}}function s(t,e){var n=t.split(".");return function(t,e,n){if(!i(e))return[];for(var r=[JSON.parse(JSON.stringify(e))],o=[],s=function(){var e=r.shift();Object.entries(e).map(function(n){var s=n[0],a=n[1],u=e._targetPath_?e._targetPath_+"."+s:s;s===t?o.push(u):i(a)&&(a._targetPath_=u,r.push(a))})};r.length;)s();return n?function(t,e){return"string"==typeof e?(e="."===e.charAt(0)?e:"."+e,t.map(function(t){return t+e})):t}(o,n):o}(n.shift(),e,n.join(".")).map(function(t){return o(t,e)}).filter(function(t){return void 0!==t}).shift()}function a(t,e){if("function"!=typeof t)return e;var n=t(e);return void 0===n?e:n}var u=function(n){var r=n.axiosConfig;void 0===r&&(r={});var o=n.askConfig;void 0===o&&(o={});var s=function t(e){var n=e.apiPath&&e.method?{res:{},req:{}}:null;return Object.entries(e).forEach(function(e){var r=e[0],o=e[1];if(i(o)){var s=t(o);s&&((n=n||{})[r]=s)}}),n}(o);this._config=o,this._axios=function(t){var n=t.createDefaultConfig;void 0===n&&(n={});var r=t.interceptors;void 0===r&&(r={});var i=e.create(n);if(0!==Object.keys(r).length){var o=function(t){return t},s=function(t){return Promise.reject(t)},a=r.request;void 0===a&&(a=o);var u=r.response;void 0===u&&(u=o);var f=r.errorRequest;void 0===f&&(f=s);var c=r.errorResponse;void 0===c&&(c=s),i.interceptors.request.use(a,f),i.interceptors.response.use(u,c)}return i}(r),this._watchVM=new t({data:{state:s}})},f={state:{configurable:!0}};return f.state.get=function(){return this._watchVM.state},u.prototype.setState=function(e,r,i){var a,u=e.split("."),f=u.pop(),c=u.join(".")||f;if("function"==typeof n[i]){var p=JSON.stringify(r);if(p===n["_data"+i])return;n["_data"+i]=p,n[i]("set",e,r)}if(/^state.*/.test(e)){if(!(a=o(c,this)))return function(e,n,r,i){return r.reduce(function(r,i){return e===i?t.set(r,i,n):t.set(r,i,{}),r[i]},i)}(f,r,u.slice(1).concat(f),this.state)}else(a=s(c,this.state))||f!==c||(a=this.state);t.set(a,f,r)},u.prototype.getState=function(t,e){if("function"==typeof n[e]){var r=n[e]("get",t);void 0!==r&&this.setState(t,r,e)}return/^state.*/.test(t)?o(t,this):s(t,this.state)},u.prototype.fetch=function(t,e){var n=this,r=function(t){return i(t)?t:"string"==typeof t?{apiKey:t}:{}}(t),o=r.apiKey,u=r.mode,f=s(o,this._config),c=f.apiPath,p=f.method,h=f.mappingData,d=f.request,v=f.response;if(null!==(e=a(d,e=function(t){var e=t.apiPath,n=t.method,r=t.data,i="GET"===n.toUpperCase();return e.includes(":")&&i&&Object.entries(r).map(function(t){var n=t[0],i=t[1];e=e.replace(new RegExp("/:("+n+")","g"),function(t,e){return delete r[e]&&"/"+i})}),Object.assign({url:e,method:n},i?{params:r}:{data:r})}({apiPath:c,method:p,data:e=e||s(o+".req",this.state)}))))return new Promise(function(t,r){n._axios(e).then(function(e){var r,f;i(h)&&(e=!0===h["%fetchMock"]?h:(r=h,f=e,Object.entries(r).map(function(t){var e,n=t[0],r=t[1];if("string"==typeof r)return(e={})[n]=s(r,f),e;throw new Error("the mapping requires a string, and the passing "+n+" is a "+typeof r)}).reduce(function(t,e){return Object.assign(t,e)},{})));var c=a(v,e);if(null===c)return t(e);n.setState(o+".res",c,u),t(c)}).catch(function(e){if(!0===h["%fetchMock"]){var i=a(v,h);return n.setState(o+".res",i,u),t(i)}return r(a(v,e))})})},Object.defineProperties(u.prototype,f),{create:function(t){return new u(t)},install:function(n,r){e=r,(t=n).mixin({beforeCreate:function(){this.$options&&this.$options.askApi?this.$ask=this.$options.askApi:this.$ask=this.$parent&&this.$parent.$ask}})},version:"0.0.16"}},"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).askApi=e();